# GraphQL 채팅 서비스 프론트엔드

## 🛠️ 기술 스택

[![GraphQL](https://img.shields.io/badge/GraphQL-E10098?style=flat-square&logo=graphql&logoColor=white)](https://graphql.org/)
[![Apollo](https://img.shields.io/badge/Apollo-311C87?style=flat-square&logo=apollographql&logoColor=white)](https://www.apollographql.com/)  
[![Vuejs](https://img.shields.io/badge/Vue.js-4FC08D?style=flat-square&logo=vuedotjs&logoColor=white)](https://vuejs.org/)
[![Pinia](https://img.shields.io/badge/🍍_Pinia-FFD859?style=flat-square&logoColor=white)](https://pinia.vuejs.org/)
[![Quasar](https://img.shields.io/badge/Quasar-050A14?style=flat-square&logo=quasar&logoColor=white)](https://quasar.dev/)  
[![Vite](https://img.shields.io/badge/Vite-646CFF?style=flat-square&logo=vite&logoColor=white)](https://ko.vite.dev)
[![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=flat-square&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)  
[![Steiger](https://img.shields.io/badge/FSD_Steiger-211b1d.svg?logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPgo8cGF0aCBkPSJNMCAwIEMyOC4zOCAwIDU2Ljc2IDAgODYgMCBDODYgMy42MyA4NiA3LjI2IDg2IDExIEM1Ny42MiAxMSAyOS4yNCAxMSAwIDExIEMwIDcuMzcgMCAzLjc0IDAgMCBaICIgZmlsbD0iI0VCRUFFQSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcsMTAyKSIvPgo8cGF0aCBkPSJNMCAwIEMyOC4zOCAwIDU2Ljc2IDAgODYgMCBDODYgMy42MyA4NiA3LjI2IDg2IDExIEM1Ny42MiAxMSAyOS4yNCAxMSAwIDExIEMwIDcuMzcgMCAzLjc0IDAgMCBaICIgZmlsbD0iI0VCRUFFQSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcsODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzI4LjM4IDAgNTYuNzYgMCA4NiAwIEM4NiAzLjYzIDg2IDcuMjYgODYgMTEgQzU3LjYyIDExIDI5LjI0IDExIDAgMTEgQzAgNy4zNyAwIDMuNzQgMCAwIFogIiBmaWxsPSIjRUJFQUVBIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1Nyw1NykiLz4KPHBhdGggZD0iTTAgMCBDMjguMzggMCA1Ni43NiAwIDg2IDAgQzg2IDMuNjMgODYgNy4yNiA4NiAxMSBDNTcuNjIgMTEgMjkuMjQgMTEgMCAxMSBDMCA3LjM3IDAgMy43NCAwIDAgWiAiIGZpbGw9IiNFQkVBRUEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU3LDQyKSIvPgo8cGF0aCBkPSJNMCAwIEMxMy41MyAwIDI3LjA2IDAgNDEgMCBDNDEgMy42MyA0MSA3LjI2IDQxIDExIEMyNy40NyAxMSAxMy45NCAxMSAwIDExIEMwIDcuMzcgMCAzLjc0IDAgMCBaICIgZmlsbD0iI0U5RThFOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcsMTQ3KSIvPgo8cGF0aCBkPSJNMCAwIEMxMy41MyAwIDI3LjA2IDAgNDEgMCBDNDEgMy42MyA0MSA3LjI2IDQxIDExIEMyNy40NyAxMSAxMy45NCAxMSAwIDExIEMwIDcuMzcgMCAzLjc0IDAgMCBaICIgZmlsbD0iI0U5RThFOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcsMTMyKSIvPgo8cGF0aCBkPSJNMCAwIEMxMy41MyAwIDI3LjA2IDAgNDEgMCBDNDEgMy42MyA0MSA3LjI2IDQxIDExIEMyNy40NyAxMSAxMy45NCAxMSAwIDExIEMwIDcuMzcgMCAzLjc0IDAgMCBaICIgZmlsbD0iI0U5RThFOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcsMTE3KSIvPgo8cGF0aCBkPSJNMCAwIEMxMy41MyAwIDI3LjA2IDAgNDEgMCBDNDEgMy42MyA0MSA3LjI2IDQxIDExIEMyNy40NyAxMSAxMy45NCAxMSAwIDExIEMwIDcuMzcgMCAzLjc0IDAgMCBaICIgZmlsbD0iI0U5RThFOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTcsNzIpIi8+Cjwvc3ZnPgo=&style=flat-square&logoColor=black)](https://github.com/feature-sliced/steiger)
[![ESLint](https://img.shields.io/badge/ESLint-4B32C3?style=flat-square&logo=eslint&logoColor=white)](https://eslint.org/)
[![Prettier](https://img.shields.io/badge/Prettier-F7B93E?style=flat-square&logo=prettier&logoColor=black)](https://prettier.io/)  
[![Vitest](https://img.shields.io/badge/Vitest-6E9F18?style=flat-square&logo=vitest&logoColor=white)](https://vitest.dev/)
[![TypeDoc](https://img.shields.io/badge/TypeDoc-3178c6.svg?logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPgo8c3ZnIHdpZHRoPSI4MDBweCIgaGVpZ2h0PSI4MDBweCIgdmlld0JveD0iMCAwIDMyIDMyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0aXRsZT5maWxlX3R5cGVfdHlwZWRvYzwvdGl0bGU+PHBvbHlnb24gcG9pbnRzPSIzIDIzIDMgOSAxNiAyIDE2IDMwIDMgMjMiIHN0eWxlPSJmaWxsOiNiNDRjZmUiLz48cG9seWdvbiBwb2ludHM9IjMgOSAxNiAxNiAyOSA5IDE2IDIgMyA5IiBzdHlsZT0iZmlsbDojOTYwMWZlIi8+PHBvbHlnb24gcG9pbnRzPSIzIDIzIDE2IDE2IDE2IDMwIDMgMjMiIHN0eWxlPSJmaWxsOiM5OWNiZmUiLz48cG9seWdvbiBwb2ludHM9IjI5IDkgMTYgMTYgMTYgMzAgMjkgMjMgMjkgOSIgc3R5bGU9ImZpbGw6IzBjMzY0ZiIvPjwvc3ZnPg==&style=flat-square&logoColor=black)](https://typedoc.org/)
[![Postman](https://img.shields.io/badge/Postman-FF6C37?style=flat-square&logo=postman&logoColor=white)](https://www.postman.com/)

## 💡 주요 기능

| 주요 기능                    | 내용                                                                                                                                                |
| ---------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| WebSocket을 통한 실시간 채팅 | **WebSocket**을 사용하여 사용자 간에 실시간으로 채팅할 수 있습니다.                                                                                 |
| 다대다 채팅 기능             | 여러 사용자가 동시에 참여하여 채팅을 진행할 수 있는 다대다 채팅 기능을 제공합니다.                                                                  |
| 채팅 방 생성 및 삭제         | 사용자가 새로운 채팅 방을 생성하고, 필요에 따라 방을 삭제할 수 있습니다.                                                                            |
| 채팅 방 내 사용자 추가       | 채팅 방 생성 후, 다른 사용자를 해당 방에 추가할 수 있는 기능을 제공합니다.                                                                          |
| 입력 타이핑 상태 표시        | 사용자가 타이핑 중일 때 다른 사용자에게 그 상태를 실시간으로 표시해줍니다.                                                                          |
| 채팅방 내용 키워드 검색      | 채팅방 내의 메시지를 키워드를 통해 쉽게 검색할 수 있는 기능을 제공합니다.                                                                           |
| 채팅 대화 디스크 저장        | 모든 채팅 내용을 디스크에 저장하여 나중에 다시 볼 수 있게 합니다.                                                                                   |
| 상태 관리                    | **Pinia**를 활용한 프록시 기반 상태 관리로 효율적이고 직관적인 상태 관리가 가능합니다.                                                              |
| 폴더 구조 최적화             | **Feature-Sliced Design(FSD)** 방식의 폴더 구조 설계를 적용하여, 명시적인 비즈니스 로직과 도메인 스코프 덕분에 필요한 로직을 쉽게 찾을 수 있습니다. |

## 🎥 데모

https://github.com/user-attachments/assets/33a33082-bac5-4f8f-bbcf-1c338ebad78e

<br/>

## 📖 개발 문서

### 📋 테스트 리포트

> 테스트 케이스 통과 여부 및 커버리지 현황 등을 시각적으로 제공합니다.  
> 이 테스트 리포트는 매 릴리즈 업데이트 시 자동으로 최신 상태로 배포됩니다.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="https://narcisource.github.io/Chat-Service--Frontend/test/Chat">
<img src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/vitest/vitest-original.svg" alt="Vitest" width='50px' /> 테스트 리포트 바로가기
</a>

<br/><br/>

### 📘 타입 문서

> 프로젝트에서 사용되는 타입 정의를 문서화한 자료입니다.  
> 이 타입 문서는 매 릴리즈 업데이트 시 자동으로 최신 상태로 배포됩니다.

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="https://narcisource.github.io/Chat-Service--Frontend/docs">
<img src="https://github.com/user-attachments/assets/6225376e-d3bf-49e2-a537-bbb8ae1caf97" alt="TypeDoc" width='50px' /> 타입 문서 바로가기
</a>

<br/><br/>

## 📐 다이어그램

### 🧩 컴포넌트 구성

![component](https://github.com/user-attachments/assets/241349df-2744-4b89-92c1-f02328752b9b)

### 📡 통신 다이어그램

```mermaid
classDiagram
    direction RL

    class ApolloClient {
        +currentUser // 현재 사용자
        +currentRoom // 현재 방
        +messages // 수신한 메시지 목록
        +subscribeSystem() // 시스템 메시지 구독
        +subscribeRoomCreated() // 방 생성 구독
        +subscribeMessage() // 채팅 메시지 구독
        +subscribeTyping() // 타이핑 상태 구독
        +subscribeUserPresence() // 사용자 상태 구독
        +queryGetHistory() // 메시지 기록 요청
        +mutationCreateRoom() // 방 생성 요청
        +mutationJoinRoom() // 방 참가 요청
        +mutationLeaveRoom() // 방 퇴장 요청
        +mutationSendMessage() // 메시지 전송
        +mutationTyping() // 타이핑 상태 전송
    }

    class ApolloServer {
        +schema // Query, Mutation, Subscription 정의
        +Query.getChatHistory() : [Message!]!
        +Mutation.createRoom() : String!
        +Mutation.joinRoom() : Boolean!
        +Mutation.leaveRoom() : Boolean!
        +Mutation.message() : Boolean!
        +Mutation.typing() : Boolean!
        +Subscription.message(roomId) : Message!
        +Subscription.roomCreated(userId) : Room!
        +Subscription.system(input) : Message!
        +Subscription.typing(roomId) : Message!
        +Subscription.userPresence() : [String!]!
    }

    ApolloClient --> ApolloServer : HTTP (Query/Mutation)
    ApolloClient --|> ApolloServer : WebSocket (Subscription)
```

### 🚚 CI/CD 파이프라인

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<a href="https://github.com/NarciSource/Chat-Service--Frontend/actions" title="GitHub Actions">
<img src="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/icons/githubactions/githubactions-original.svg" height="45" /> GitHub Actions
</a>

```mermaid
graph LR
    subgraph CD[🚀 CD 영역]
        direction LR
        Tag[태그 푸시]
        Tag --> DeployGH[gh-pages에 배포] --> |자동 워크플로 실행|pages-build-deployment[GitHub Pages 배포 완료]
    end

    Build -.-> |📦 아티팩트|Tag

    subgraph CI[🧪 CI 영역]
        direction LR
        Push[브랜치 푸시] --> Lint[린트] --> |🟢 통과|Test[테스트]
        Test --> |🟢 통과|Build[빌드]
    end

    click Build "https://github.com/NarciSource/Chat-Service--Frontend/actions/workflows/vite-build.yml"
    click Build_Single_SPA "https://github.com/NarciSource/Chat-Service--Frontend/actions/workflows/vite-build.yml"
    click Review "https://github.com/NarciSource/Chat-Service--Frontend/actions/workflows/auto-assign.yml"
    click DeployGH "https://github.com/NarciSource/Chat-Service--Frontend/actions/workflows/deploy-gh-pages.yml"
    click pages-build-deployment "https://github.com/NarciSource/Chat-Service--Frontend/actions/workflows/pages/pages-build-deployment"
    click DeployAWS "https://github.com/NarciSource/Chat-Service--Frontend/actions/workflows/deploy-aws-s3.yml"
```

## 📂 폴더 구조

<details>
<summary>열기</summary>

> <image src="https://feature-sliced.design/kr/img/brand/logo-primary.png" width=40 />

```python
client
├─ .github
│  └─ workflows # 깃헙 액션 워크플로어 프로세스
│     ├─ deploy-gh-pages.yml # 깃헙 페이지로 배포
│     └─ vite-build.yml # Vite로 빌드
├─ index.html
├─ src
│  ├─ app
│  │  ├─ App.vue # 애플리케이션 컴포넌트 진입점
│  │  ├─ apolloPlugin.ts # 아폴로 클라이언트 플러그인
│  │  └─ main.ts # 프로바이더 스택
│  ├─ entities # 비즈니스 엔터티 레이어
│  │  └─ chat
│  │     ├─ api
│  │     │  └─ dto.ts
│  │     ├─ model # 엔터티 모델
│  │     │  ├─ index.ts
│  │     │  ├─ Message.ts
│  │     │  ├─ Room.ts
│  │     │  └─ User.ts
│  │     └─ service
│  │        └── mapper # 페이로드 ↔ 엔터티 헬퍼 메서드
│  │           └─ user.ts # 유저 관련 헬퍼함수
│  ├─ features # 기능 구현체 레이어
│  │  ├─ chat
│  │  │  ├─ index.vue
│  │  │  ├─ api
│  │  │  │  ├─ quries # GraphQL 쿼리
│  │  │  │  │  └─ getHistory.gql
│  │  │  │  ├─ mutations # GraphQL 뮤테이션
│  │  │  │  │  ├─ sendMessage.gql
│  │  │  │  │  └─ sendTyping.gql
│  │  │  │  ├─ subscriptions # GraphQL 구독
│  │  │  │  │  ├─ receiveMessage.gql
│  │  │  │  │  ├─ system.gql
│  │  │  │  │  └─ onTyping.gql
│  │  │  │  ├─ operations.ts # GraphQL 연산
│  │  │  │  └─ hooks.ts # GraphQL 훅
│  │  │  ├─ store # 중앙상태저장소
│  │  │  │  └─ useChatStore.ts
│  │  │  └─ ui
│  │  │     ├─ index.ts
│  │  │     ├─ layout.vue # 레이어 레이아웃
│  │  │     ├─ connect.vue # 소켓 연결
│  │  │     ├─ title.vue # 채팅 제목
│  │  │     ├─ content.vue # 채팅 컨텐츠
│  │  │     ├─ search.vue # 채팅 메시지 검색
│  │  │     ├─ submit.vue # 채팅 메시지 제출
│  │  │     ├─ actions.vue # 액션 동작 모음
│  │  │     ├─ invite.vue # 추가 사용자 초대
│  │  │     ├─ participants.vue # 참여자 확인
│  │  │     └─ save.vue # 채팅 파일로 저장
│  │  ├─ room
│  │  │  ├─ index.ts
│  │  │  ├─ index.vue
│  │  │  ├─ api
│  │  │  │  ├─ mutations
│  │  │  │  │  ├─ createRoom.gql
│  │  │  │  │  ├─ joinRoom.gql
│  │  │  │  │  └─ leaveRoom.gql
│  │  │  │  ├─ subscriptions
│  │  │  │  │  └─ roomCreated.gql
│  │  │  │  ├─ operations.ts
│  │  │  │  └─ hooks.ts
│  │  │  ├─ store
│  │  │  │  └─ useRoomStore.ts
│  │  │  └─ ui
│  │  │     ├─ index.ts
│  │  │     ├─ layout.vue # 레이아웃
│  │  │     ├─ make-room.vue # 방 만들기
│  │  │     ├─ invite-room.vue # 방 초대
│  │  │     ├─ leave-room.vue # 방 나가기
│  │  │     └─ room-list.vue # 방 목록
│  │  ├─ user-auth # 현재 사용자
│  │  │  ├─ index.ts
│  │  │  ├─ api
│  │  │  │  ├─ quries
│  │  │  │  │  └─ getUsers.gql
│  │  │  │  ├─ mutations
│  │  │  │  │  └─ setUser.gql
│  │  │  │  ├─ operations.ts
│  │  │  │  └─ hooks.ts
│  │  │  ├─ store
│  │  │  │  └─ useUserStore.ts
│  │  │  └─ ui
│  │  │     ├─ index.ts
│  │  │     ├─ manual-register.vue
│  │  │     └─ register.vue
│  │  └─ user-presence # 접속 사용자들
│  │     ├─ index.vue
│  │     ├─ api
│  │     │  ├─ subscriptions
│  │     │  │  └─ userPresence.gql
│  │     │  ├─ operations.ts
│  │     │  └─ hooks.ts
│  │     ├─ store
│  │     │  └─ useUsersStore.ts
│  │     └─ ui
│  │        ├─ index.ts
│  │        ├─ user-item.vue # 접속 사용자
│  │        └─ user-list.vue # 접속 사용자 목록
│  ├─ widgets # 위젯 레이어
│  │  └─ chat
│  │     ├─ index.vue
│  │     └─ ui
│  │        ├─ index.ts
│  │        └─ layout.vue
│  ├─ pages # 페이지 레이어
│  │  └─ chat
│  │     ├─ index.vue
│  │     ├─ standalone-page.vue
│  │     ├─ widget-page.vue
│  │     └─ ui
│  │        ├─ layout.vue
│  │        └─ fab-layout.vue # 플로팅버튼 레이아웃
│  └─ shared # 공유 레이어
│     ├─ api
│     │  └─ types.ts # GraphQL 공용 타입
│     └─ lib
│        ├─ apolloClient.ts # Apollo Client 공용 참조
│        ├─ tokens.ts # 토큰 3종
│        └─ getUser.ts # 접속 유저 정보 불러오기
├─ codegen.yml # GraphQL 훅 생성기
├─ Dockerfile # 도커파일
│  └─ nginx.conf # 정적 파일 제공
├─ package.json # 의존성 설정
│  ├─ .prettierrc # 포맷터 설정
│  ├─ eslint.config.js # 린트 설정
│  └─ steiger.config.ts # FSD 린트 설정
└─ vite.config.ts # Vite 설정 파일
   ├─ shims-vue.d.ts # *.vue 타입 정의
   ├─ vite-env.d.ts # 환경변수 타입 정의
   └─ vitest.config.ts # Vitest 설정 파일
```

</details>

## 🚀 실행 방법

```sh
$ npm install
$ npm run dev
```
